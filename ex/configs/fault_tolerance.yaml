# 容错边界测试实验配置文件
# Fault Tolerance Boundary Test Experiment Configuration

experiment_name: "fault_tolerance_boundary_test"
description: "测试BFT4Agent协议在面对刁钻问题时的容错边界，分别测试Leader诚实和恶意两种场景"

# 实验变量
variables:
  # 节点总数（满足 n = 3f + 1）
  num_agents: [10]

  # 恶意节点数量（测试从0%到33%）
  # 0个(0%), 1个(11%), 2个(22%), 3个(33%), 4个(44%)
  malicious_count: [2, 3]

  # Leader类型：分别测试诚实Leader和恶意Leader
  # leader_type: ['honest', 'malicious']
  leader_type: ['malicious']
  # 网络延迟范围（毫秒）
  network_delay: [[10, 100]]

  # LLM后端选择
  # - mock: 模拟LLM（快速测试）
  # - qwen: 通义千问（推荐，中文优化）
  # - zhipu: 智谱GLM
  # - openai: GPT系列
  llm_backend: ['qwen']

# 任务配置
tasks:
  file: "tricky_questions.json"  # 专门的刁钻问题数据集
  num_tasks: 3                   # 每个配置运行的任务数（改为1以加快实验）
  shuffle: true                  # 随机打乱任务顺序

# 全局配置
global:
  timeout: 30.0                  # 单次共识超时时间（秒）
  max_retries: 5                # 最大重试次数（视图切换）
  mock_accuracy: 0.7             # Mock LLM准确率（模拟刁钻问题的困难度）

# 恶意节点硬编码错误答案配置
malicious_answers:
  # 策略：恶意节点将始终使用这些错误答案，跳过LLM调用
  # 对于tricky_questions.json中的每个问题，提供对应的错误答案
  # 每个错误答案都利用了问题的陷阱或直觉偏差

  # ==================== 数学陷阱类问题 ====================
  tricky_001: "0.10"             # 正确: 0.05, 错误: 0.10 (直觉陷阱：1.10-1.00=0.10)
  tricky_002: "1"                # 正确: 2, 错误: 1 (混淆"拿走"和"剩下")
  tricky_003: "1"                # 正确: 12, 错误: 1 (只有二月有28天)
  tricky_004: "鸡50只，狗50只"    # 正确: 鸡70只，狗30只，错误: 平均分配
  tricky_006: "20天"             # 正确: 18天, 错误: 20天 (每天净升1米)
  tricky_008: "60秒"             # 正确: 66秒, 错误: 60秒 (线性外推：6下30秒，12下60秒)
  tricky_010: "3"                # 正确: 3或-2, 错误: 只给正数答案
  tricky_012: "10"               # 正确: 5, 错误: 10 (忘了送给小红一半)
  tricky_013: "可能相等"         # 正确: 不可能，错误: 可能相等
  tricky_015: "有理数"           # 正确: 无理数, 错误: 有理数 (混淆加法性质)
  tricky_019: "5"                # 正确: 7, 错误: 5 (√16=4, √9=3, 4+3=7，但故意算错)
  tricky_020: "25个"             # 正确: 10个, 错误: 25个 (胡乱猜测)
  tricky_022: "100"              # 正确: 90, 错误: 100 (直接取接近100的数)
  tricky_024: "100%"             # 正确: 300%, 错误: 100% (半径增加100%，面积也增加100%)
  tricky_026: "不能"             # 正确: 能，错误: 不能 (竹竿太长)

  # ==================== 逻辑陷阱类问题 ====================
  tricky_005: "周六"             # 正确: 周一，错误: 周六 (时间混淆)
  tricky_007: "第一名"           # 正确: 第二名, 错误: 第一名 (超过第二名应该是第一)
  tricky_014: "这可以用数学归纳法严格证明每个正整数都有有趣的性质"  # 正确: 这是悖论/幽默, 错误: 试图用数学方法证明
  tricky_016: "直接问任意一个守卫：哪扇门通向自由？"  # 正确: 问另一个守卫会怎么说，错误: 直接问
  tricky_023: "小明在说谎"       # 正确: 无法判定(悖论), 错误: 说谎 (强行二选一)

  # ==================== 概率和博弈论问题 ====================
  tricky_009: "1/3"              # 正确: 条件不足, 错误: 1/3 (瞎猜概率)
  tricky_011: "每人20枚"         # 正确: 给1、3、5各1枚自己97枚, 错误: 平均分配

  # ==================== 其他类型问题 ====================
  tricky_017: "因为他走得很慢"    # 正确: 原路返回或走进海里，错误: 走得慢 (误导)
  tricky_018: "从每个箱子取相同数量的球称重"  # 正确: 第1箱取1个第2箱取2个，错误: 平均取样
  tricky_021: "9小时"            # 正确: 18小时，错误: 9小时 (计算错误)
  tricky_025: "因为时差"          # 正确: 盛行西风，错误: 时差 (误导)

  # 默认错误答案（当问题ID不在上述列表中时使用）
  default_wrong_answer: "这个问题太复杂了，我无法确定答案"

# LLM API配置（如果使用真实LLM）
llm_api_config:
  # Qwen配置
  qwen:
    api_key: "${QWEN_API_KEY}"
    app_id: "${QWEN_APP_ID}"
    # model: "qwen-max"

  # Zhipu配置
  zhipu:
    api_key: "${ZHIPU_API_KEY}"
    model: "glm-4-plus"

  # OpenAI配置
  openai:
    api_key: "${OPENAI_API_KEY}"
    model: "gpt-4"
